<ng-container *ngIf="vm$ | async as vm">
<div class="showroom-container">

    <!-- Hero Section -->
     <section class="hero-section">
        <div class="hero-content">
            <h1 class="hero-title">âœ¨ Fashion Forward</h1>
            <p class="hero-subtitle">Discover your style, embrace the trends</p>
            <button *ngIf="!isLoggedIn()" class="cta-button" routerLink="/register">ğŸ›ï¸ Shop Now</button>
        </div>

        <div class="hero-image">
            <div class="hero-placeholder">ğŸ‘—</div>
        </div>
     </section>

    <!-- Categories Section -->
    <section class="categories-section">
        <h2>Shop by Category</h2>
        <div class="categories-grid">
            <div *ngFor="let category of categories" class="category-card">
                <div class="category-icon">
                    <span *ngIf="category === 'Shirts'">ğŸ‘•</span>
                    <span *ngIf="category === 'Pants'">ğŸ‘–</span>
                    <span *ngIf="category === 'Dresses'">ğŸ‘—</span>
                    <span *ngIf="category === 'Accessories'">ğŸ‘ </span>
                </div>
                <h3>{{category}}</h3>
                <p>Explore {{category.toLowerCase()}}</p>
            </div>
        </div>
    </section>

    <!-- Featured Products -->
    <section class="products-section">
        <div class="section-header">
            <h2>Featured Products</h2>
            <button class="auto-scroll-toggle" 
                    [class.active]="isAutoScrollActive"
                    type="button"
                    [attr.aria-pressed]="isAutoScrollActive"
                    *ngIf="!vm.loading && vm.featuredProducts.length > 0"
                    (click)="toggleAutoScroll()">
                <span class="auto-scroll-icon" aria-hidden="true">{{ isAutoScrollActive ? 'â¸ï¸' : 'â–¶ï¸' }}</span>
                <span class="auto-scroll-text">{{ isAutoScrollActive ? 'Pause' : 'Play' }}</span>
            </button>
        </div>

        <div *ngIf="vm.loading" class="loading">
            <div class="spinner"></div>
            <p>âœ¨ Loading amazing products for you...</p>
        </div>

        <div *ngIf="!vm.loading && vm.featuredProducts.length === 0" class="no-products">
            <div class="empty-icon">ğŸ›ï¸</div>
            <h3>{{ vm.errorMessage || 'ğŸ˜Š Our collection is being refreshed!' }}</h3>
            <p>Check back soon for amazing new arrivals</p>
            <button *ngIf="!isLoggedIn()" routerLink="/register" class="join-button">Join Our Community</button>
        </div>

        <div *ngIf="!vm.loading && vm.featuredProducts.length > 0" 
             class="horizontal-scroll-wrapper">
                    <div class="products-scroll-container" #featuredScrollContainer
               (mousedown)="onDragStart($event)"
               (mousemove)="onDrag($event)"
               (mouseup)="onDragEnd()"
               (mouseleave)="onDragEnd()">
            <div
                *ngFor="let product of vm.featuredProducts"
                class="product-card"
                [routerLink]="['/product', product._id]"
                role="link"
                tabindex="0"
                (click)="onProductCardClick($event)"
            >
                <div class="product-image">
                    <img *ngIf="product.image && product.image[0]" [src]="product.image[0]" [alt]="product.name || 'Product image'">
                    <div *ngIf="!product.image || !product.image[0]" class="product-placeholder">ğŸ“·</div>
                </div>

                <div class="product-info">
                    <h3>{{product.name || 'Unnamed Product'}}</h3>
                    <p class="product-category">{{product.category || 'Fashion'}}</p>
                    <div class="rating-row" *ngIf="product?._id">
                    <div class="stars">
                        <ng-container *ngFor="let filled of starsFor(product._id)">
                        <span class="star" [class.filled]="filled">â˜…</span>
                        </ng-container>
                    </div>
                    <span class="rating-meta">{{ getAverageRating(product._id) | number : '1.1-1' }}/5</span>
                    <span class="rating-meta">({{ getReviewCount(product._id) }})</span>
                    </div>
                    <div class="product-price">${{ (product.price || 0) | number:'1.2-2' }}</div>
                                        <div class="see-product-details-tile" aria-hidden="true">See Product Details</div>
                </div>
            </div>
          </div>
        </div>
    </section>

    <!-- Call to Action -->
    <section *ngIf="!isLoggedIn()" class="cta-section">
        <div class="cta-content">
            <h2>Ready to Start Shopping?</h2>
            <p>Join thousands of satisfied customers</p>
            <div class="cta-buttons">
                <button routerLink="/register" class="cta-button primary">Create Account</button>
                <button routerLink="/login" class="cta-button secondary">Sign In</button>
            </div>
        </div>
    </section>
    
</div>

</ng-container>
