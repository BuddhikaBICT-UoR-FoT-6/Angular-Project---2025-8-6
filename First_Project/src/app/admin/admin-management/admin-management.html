<div class="admin-management-container">
  <div class="header">
    <div class="header-content">
      <h1 class="page-title">ğŸ‘¨â€ğŸ’¼ Admin Management</h1>
      <p class="page-subtitle">Manage administrator and superadmin roles</p>
    </div>
    <div class="header-actions">
      <a routerLink="/admin/dashboard" class="btn-secondary">â† Back to Dashboard</a>
      <button type="button" (click)="loadUsers()" [disabled]="isLoading" class="btn-primary">
        <span *ngIf="!isLoading">ğŸ”„ Refresh</span>
        <span *ngIf="isLoading" class="spinner"></span>
      </button>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="spinner-large"></div>
    <p>Loading admin users...</p>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && admins.length === 0" class="empty-state">
    <div class="empty-icon">ğŸ‘¨â€ğŸ’¼</div>
    <p class="empty-text">No admin users found</p>
  </div>

  <!-- Admin Cards -->
  <div *ngIf="!isLoading && admins.length > 0" class="admin-grid">
    <div class="admin-card" *ngFor="let u of admins">
      <div class="admin-avatar">
        <span class="avatar-text">{{ (u.full_name || u.email || '?')[0].toUpperCase() }}</span>
      </div>
      <div class="admin-info">
        <div class="admin-name">{{ u.full_name || 'â€”' }}</div>
        <div class="admin-email">{{ u.email || 'â€”' }}</div>
        <span class="role-badge" [class]="'role-' + u.role">{{ u.role }}</span>
      </div>
      <div class="admin-actions">
        <button type="button" class="btn-edit" (click)="openEditModal(u)">âœï¸ Edit Role</button>
        <button type="button" class="btn-delete" (click)="deleteUser(u)">ğŸ—‘ï¸ Delete</button>
      </div>
    </div>
  </div>
</div>

<!-- Edit Role Modal -->
<div class="modal-overlay" *ngIf="editModalOpen && editingUser" (click)="closeEditModal()">
  <div class="modal-dialog" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <div class="modal-header-content">
        <h3 class="modal-title">âœï¸ Edit Admin Role</h3>
        <p class="modal-subtitle">{{ editingUser.full_name || editingUser.email }}</p>
      </div>
      <button type="button" class="modal-close" (click)="closeEditModal()">Ã—</button>
    </div>
    
    <div class="modal-body">
      <div class="form-field">
        <label class="field-label">User Role</label>
        <select class="field-select" [(ngModel)]="editingUser.role">
          <option value="superadmin">Superadmin - Full system access</option>
          <option value="admin">Admin - Limited admin access</option>
          <option value="customer">Customer - Regular user</option>
          <option value="supplier">Supplier - Supplier access</option>
        </select>
      </div>
      
      <div class="modal-actions">
        <button type="button" class="btn-secondary-modal" (click)="closeEditModal()">Cancel</button>
        <button type="button" class="btn-primary-modal" (click)="saveRole()">ğŸ’¾ Save Changes</button>
      </div>
    </div>
  </div>
</div>
